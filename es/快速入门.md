

### 查看所有索引

```
get _cat/indices?v
```



### 添加数据

```
post indices/_doc

{
	"title":"小米手机",
	"category":"小米",
	"images":"http://www.geadsfa.com",
	"price":;3212
}
```

```
#自定义id
post indices/_doc/1001

{
	"title":"小米手机",
	"category":"小米",
	"images":"http://www.geadsfa.com",
	"price":;3212
}
```



### 查询数据

查询一条数据

```
get indices/_doc/1001
```

全部查询

```
get indices/_search
```

#### 条件查询

请求路径

```
get indices/_search?q=category:小米
```

请求体

```
get indices/_search

{
	"query":{
		"category":"小米"
	}
}
```

全部查询

```
get indices/_search

{
	"query":{
		"match_all":{}
	}
}
```

分页查询

```
get indices/_search

{
	"query":{
		"match_all":{}
	},
	"from":0,
	"size":2
}
```

局部查询

```
get indices/_search

{
	"query":{
		"match_all":{}
	},
	"from":0,
	"size":2,
	"_source":["title"]
}
```

查询结构中排序

```
get indices/_search

{
	"query":{
		"match_all":{}
	},
	"from":0,
	"size":2,
	"_source":["title"],
	"sort":{
		"price":{
			"order":"desc"
		}
	}
}
```

#### 组合查询

```
get indices/_search

{
	"query":{
		"bool":{
			"must":[
				{
					"match":{
						"category":"小米"
					}
				}
			]
		}
	}
}
```

与

```

get indices/_search

{
	"query":{
		"bool":{
			"must":[
				{
					"match":{
						"category":"小米"
					}
				},
				{
					"match":{
						"price":1999.0
					}
				}
			]
		}
	}
}
```

或

```
get indices/_search

{
	"query":{
		"bool":{
			"should":[
				{
					"match":{
						"category":"小米"
					}
				},
				{
					"match":{
						"category":"华为"
					}
				}
			]
		}
	}
}
```

范围查询

```
get indices/_search

{
	"query":{
		"bool":{
			"should":[
				{
					"match":{
						"category":"小米"
					}
				},
				{
					"match":{
						"category":"华为"
					}
				}
			],
			"filter":{
				"range":{
					"gt":5000
				}
			}
		}
	}
}
```

完全配置

```
get indices/_search

{
	"query":{
		"match_phrase":{
			"category":"小华"
		}
	}
}
```

高亮显示

```
get indices/_search

{
	"query":{
		"match_phrase":{
			"category":"小米"
		}
	},
	"hight":{
		"fields":{
			"category":{}
		}
	}
}
```

#### 聚合操作



```
get indices/_search

{
	"aggs":{
		"price_group":{
			"terms":{
				"field":"price"
			}
		}
	},
	"size":0
}
```



```
get indices/_search

{
	"aggs":{
		"price_avg":{
			"avg":{
				"field":"price"
			}
		}
	},
	"size":0
}
```

#### 分与不分词



```
put indices/_mapping

{
	"properties":{
		"name":{
			"type":"text",
			"index":true
		},
		"sex":{
			"type":"keyword",
			"index":true
		},
		"tel":{
			"type":"keyword",
			"index":false
		}
	}
}
```

映射

```
get indices/_mapping

{
	"properties":{
		"name":{
			"type":"text",
			"index":true
		},
		"sex":{
			"type":"keyword",
			"index":true
		},
		"tel":{
			"type":"keyword",
			"index":false
		}
	}
}
```



















### 修改

覆盖

```
put indices/_doc/1001

{
	"title":"小米手机",
	"category":"小米",
	"images":"http://www.geadsfa.com",
	"price":;3212
}
```

局部修改

```
post indices/_update/1001

{
	"doc":{
		"title":"小米手机"
	}
}
```

### 删除

```
delete indices/_doc/1001
```











